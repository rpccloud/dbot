{
  "name": "install demo",
  "remotes": {
    "dev81": { "port": 22,  "user": "root", "host": "192.168.1.81"},
    "dev82": { "port": 22,  "user": "root", "host": "192.168.1.82"},
    "dev83": { "port": 22,  "user": "root", "host": "192.168.1.83"}
  },
  "env": {
    "CustomValue": "ok"
  },
  "jobs": {
    "install": {
      "concurrency": true,
      "commands": [
        {"value": "echo \"Start Running\"", "runAt": "local"},
        {"type": "job", "value": "nodeInstall", "runAt": "dev81"},
        {"type": "job", "value": "nodeInstall", "runAt": "dev82"},
        {"type": "job", "value": "nodeInstall", "runAt": "dev83"}
      ],
      "errorHandler": [
        {"type": "job", "value": "nodeUninstall", "runAt": "dev81"}
      ]
    },
    "nodeInstall": {
      "commands": [
        {"value": "apt-get update"},
        {"value": "vim test.sh", "inputs": [
          "i", 
          "test\n",
          "test\n",
          "${CustomValue}\n",
          "${KeyESC}:wq\n"
        ]}
      ]
    },
    "nodeUninstall": {
      "commands": [
        {"type": "cmd", "value": "rm /opt/demo/test.log"}
      ]
    },
    "uninstall": {
      "concurrency": true,
      "commands": [
        {"type": "job", "value": "nodeUninstall", "runAt": "dev81"}
      ]
    }
  }
}
